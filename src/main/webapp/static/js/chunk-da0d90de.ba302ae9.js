(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da0d90de"],{3780:function(e,t,s){"use strict";s("f6f6")},"90af":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("el-container",{attrs:{direction:"vertical"}},[t("div",[t("div",{staticClass:"title-wrap"},[e._v(e._s(e.detailInfo.name)+" "),e.showResult?t("h2",{staticClass:"green"},[e._v("("+e._s(e.showResult&&0===e.submitStatus?"等待批改":e.score+"分")+")")]):e._e(),e.showResult?e._e():t("h2",{staticClass:"green"},[e._v(" "+e._s(e.countdownStr)+" ")])])]),e._l(e.questionList,(function(s){return t("el-card",{key:s.id,staticClass:"box-card"},[t("h5",[e._v(e._s(s.name)+"("+e._s(s.score)+"分)")]),1==s.type?t("div",[t("el-radio",{attrs:{disabled:e.showResult,label:"A",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v(e._s(s.a))]),t("el-radio",{attrs:{disabled:e.showResult,label:"B",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v(e._s(s.b))]),t("el-radio",{attrs:{disabled:e.showResult,label:"C",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v(e._s(s.c))]),t("el-radio",{attrs:{disabled:e.showResult,label:"D",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v(e._s(s.d))])],1):e._e(),2==s.type?t("div",[t("el-radio",{attrs:{disabled:e.showResult,label:"是",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v("是")]),t("el-radio",{attrs:{disabled:e.showResult,label:"否",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}},[e._v("否")])],1):e._e(),3==s.type?t("div",[t("el-input",{attrs:{disabled:e.showResult,label:"是",border:""},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}})],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showResult&&1===e.submitStatus,expression:"showResult && submitStatus === 1"}]},[t("p",[e._v("结果："),t("span",{class:s.correct?"green":"red"},[e._v(e._s(s.correct?"正确":"错误"))])]),t("p",[e._v("得分："),t("span",{class:s.correct?"green":"red"},[e._v(e._s(s.getScore))])]),t("p",{staticStyle:{"margin-top":"0"}},[e._v("解析："+e._s(s.detail))])])])})),e.showResult?t("el-button",{attrs:{type:"primary"},on:{click:e.goback}},[e._v("返回")]):t("el-button",{attrs:{type:"primary"},on:{click:e.submitAnswer}},[e._v("交卷")])],2)},r=[],i=(s("14d9"),{data(){return{homeworkId:"",questionList:[],detailInfo:{},showResult:!1,score:0,submitStatus:0,countdownStr:""}},mounted(){this.homeworkId=this.$route.query.homeworkId,this.$axios.get("/homework/query-question?homeworkId="+this.homeworkId).then(e=>{this.questionList=e.data.map(e=>{if(e.options){let t=JSON.parse(e.options);e.a=t[0].value,e.b=t[1].value,e.c=t[2].value,e.d=t[3].value}return e}),this.$axios.get("/homework-submit/list",{params:{homeworkId:this.homeworkId}}).then(e=>{e.data.forEach(e=>{let t=this.questionList.find(t=>t.id===e.questionId);t&&(t.checked=e.answer,t.getScore=e.score,t.correct=e.correct,this.score+=e.score)}),e.data.length>0&&(this.showResult=!0,this.submitStatus=e.data[0].status)})}),this.$axios.get("/homework/query?id="+this.homeworkId).then(e=>{this.detailInfo=e.data.model;const t=()=>{let e=this.detailInfo.deadline-(new Date).getTime();this.countdownStr=e>0?this.formatMillisecondsToTime(e):"00:00:00"};t(),setInterval(()=>{t()},1e3)})},methods:{submitAnswer(){this.score=0;let e=this.questionList.map(e=>e.checked).filter(e=>!e);e.length>0?this.$message.error("请先完成所有题目"):(this.questionList.forEach(e=>{e.checked===e.answer?(this.score+=e.score,e.getScore=e.score,e.correct=1):(e.getScore=0,e.correct=0)}),this.$axios.post("/homework-submit/add",{homeworkId:this.homeworkId,list:this.questionList.map(e=>({questionId:e.id,answer:e.checked,score:e.getScore,correct:e.correct}))}).then(e=>{e.success?(this.$message.success("提交成功"),this.showResult=!0):this.$message.error(e.message)}))},goback(){this.$router.push("/portal/home/course")},formatMillisecondsToTime(e){const t=Math.floor(e/36e5),s=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3),r=t.toString().padStart(2,"0"),i=s.toString().padStart(2,"0"),a=o.toString().padStart(2,"0");return`${r}:${i}:${a}`}}}),a=i,c=(s("3780"),s("2877")),l=Object(c["a"])(a,o,r,!1,null,"5062a6c8",null);t["default"]=l.exports},f6f6:function(e,t,s){}}]);
//# sourceMappingURL=chunk-da0d90de.ba302ae9.js.map